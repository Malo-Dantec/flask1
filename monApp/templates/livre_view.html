{% extends "base.html" %}

{% block main %}
<h1 class="mb-4">Consultation du livre</h1>

<div class="card shadow-lg p-4">
  <div class="row g-4 align-items-center">
    
    <div class="col-md-4 text-center">
      <img src="{{ url_for('static', filename='images/' + selectedLivre.img) }}"
           alt="Première de couverture"
           class="img-fluid rounded shadow-sm"
           style="max-height: 350px; object-fit: contain;">
    </div>

    <div class="col-md-8">
      <h2 class="card-title mb-3">
        {{ selectedLivre.titre }}
        {% if current_user.is_authenticated %}
        <button class="btn btn-link favori-btn" 
                data-livre-id="{{ selectedLivre.idL }}"
                style="font-size: 2rem; text-decoration: none;">
          {% if current_user.est_favori(selectedLivre) %}
            ⭐
          {% else %}
            ☆
          {% endif %}
        </button>
        {% endif %}
      </h2>
      <ul class="list-group list-group-flush mb-4">
        <li class="list-group-item">
          <strong>Auteur :</strong> {{ selectedLivre.auteur.Nom }}
        </li>
        <li class="list-group-item">
          <strong>Prix :</strong> {{ "%.2f"|format(selectedLivre.prix) }} €
        </li>
        <li class="list-group-item">
          <strong>URL :</strong> 
          <a href="{{ selectedLivre.url }}" target="_blank">{{ selectedLivre.url }}</a>
        </li>
      </ul>

      <div class="mt-3">
        <button class="btn btn-secondary" onclick="window.history.back()">Retour</button>
        {% if current_user.is_authenticated %}
        <a href="{{ url_for('updateLivre', idL=selectedLivre.idL) }}" class="btn btn-warning">
          Modifier
        </a>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<script src="{{ url_for('static', filename='js/favoris.js') }}"></script>
{% endblock %}