{% extends 'base.html' %}
{% block main %}
  <h1>Liste des livres</h1>
  <p>Nombre de livres : {{ livres|length }}</p>
  {% if livres|length == 0 %}
    <p>Aucun livre trouvé.</p>
  {% endif %}
  <form method="get" action="{{ url_for('getLivres') }}">
    <input type="text" name="q" placeholder="Rechercher un livre..." value="{{ query }}">
    <button type="submit">Rechercher</button>
  </form>
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>Titre</th>
        <th>Prix</th>
        <th>URL</th>
        <th>Première de couverture</th>
        <th>Auteur</th>
      </tr>
    </thead>
    <tbody>
      {% for unLivre in livres %}
        <tr>
          <td>{{ unLivre.idL }}</td>
          <td>{{ unLivre.titre }}</td>
          <td>{{ unLivre.prix }}</td>
          <td><a href="{{ unLivre.url }}">{{ unLivre.url }}</a></td>
          <td><img src="{{ url_for('static', filename='images/' + unLivre.img) }}" alt="Première de couverture"></td>
          <td>{{ unLivre.auteur.Nom }}</td>
          <td>
              <a href="{{ url_for('viewLivre', idL=unLivre.idL) }}" class="btn btn-info">
                  Voir <i class="fas fa-eye"></i>
              </a>
              {% if current_user.is_authenticated %}
              <a href="{{ url_for('updateLivre', idL=unLivre.idL) }}" class="btn btn-warning">
                  Modifier prix <i class="fas fa-pen"></i>
              {% endif %}
              </a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
